<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Perfil del Usuario</ion-title>
    <ion-buttons slot="end" *ngIf="usuarioLogueado">
      <ion-button (click)="cerrarSesion()">
        <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Perfil del Usuario</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="avatar-container" (click)="cambiarFoto()" style="display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 1rem;">
    <div style="width: 120px; height: 120px; border-radius: 50%; overflow: hidden; background-color: #f4f4f4; display: flex; align-items: center; justify-content: center;">
      <img
        *ngIf="fotoPerfil && fotoPerfil.startsWith('data:image')"
        [src]="fotoPerfil"
        alt="Foto de perfil"
        style="width: 100%; height: 100%; object-fit: cover;" />
      <ion-icon
        *ngIf="!fotoPerfil || !fotoPerfil.startsWith('data:image')"
        name="person-circle"
        size="large"
        color="medium">
      </ion-icon>
    </div>
  </div>

  <ion-list>
    <ion-item>
      <ion-label position="stacked">Nombre</ion-label>
      <ion-input [(ngModel)]="usuario.nombre"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Apellido</ion-label>
      <ion-input [(ngModel)]="usuario.apellido"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Correo</ion-label>
      <ion-input [(ngModel)]="usuario.correo"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Nivel de Estudios</ion-label>
      <ion-select [(ngModel)]="usuario.nivel" interface="popover" placeholder="Seleccione un nivel">
        <ion-select-option value="Educación básica">Educación básica</ion-select-option>
        <ion-select-option value="Educación media">Educación media</ion-select-option>
        <ion-select-option value="Técnico nivel superior">Técnico nivel superior</ion-select-option>
        <ion-select-option value="Profesional">Profesional</ion-select-option>
        <ion-select-option value="Postgrado">Postgrado</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Fecha de Nacimiento</ion-label>
      <ion-input [(ngModel)]="usuario.fechaNacimiento" type="date"></ion-input>
    </ion-item>
  </ion-list>

  <ion-button expand="block" color="primary" (click)="guardarPerfil()">Guardar cambios</ion-button>

  <ion-list>
    <ion-item>
      <ion-label position="stacked">Nueva contraseña</ion-label>
      <ion-input [(ngModel)]="nuevaContrasena" type="password"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Confirmar contraseña</ion-label>
      <ion-input [(ngModel)]="confirmarContrasena" type="password"></ion-input>
    </ion-item>
  </ion-list>
  <ion-button expand="block" (click)="actualizarContrasena()">Actualizar contraseña</ion-button>

</ion-content>
